import{j as e,u as y,r as t,a as b,b as k,_ as u}from"./index-UE1Tgrxy.js";import{H as C,S as I,I as w,a as v,B as S,G as P,C as E}from"./InputPassword-Dh8rWYF_.js";const A=()=>e.jsx("div",{className:"h-full w-full p-3",children:e.jsx("img",{src:"https://img.freepik.com/premium-photo/pink-blue-background-with-pink-white-plant-pink-flowers_1059430-78137.jpg?w=826",className:"w-full h-full rounded-3xl object-cover"})}),H=()=>{const o=y(),[l,r]=t.useState(!1),{setAuthUser:i}=b();return{loading:l,setSignup:async(f,m,h,c,n)=>{if(U(f,m,h,c,n)){r(!0);try{const s=await k.post("/user/signup",{username:f,email:m,password:h,confirmPassword:c});console.log(s.data),localStorage.setItem("jwt",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),i(s.data.token),u.success(s.data.msg),o("/myspace")}catch(s){s.response?(n(s.response.data.msg||"An error occurred"),u.error(s.response.data.msg||"An error occurred",{duration:600})):s.request?(n("No response received from server"),u.error("No response received from server",{duration:600})):(n("Error: "+s.message),u.error("Error: "+s.message,{duration:600}))}finally{r(!1)}}}}};function U(o,l,r,i,d){return!o||!l||!r||!i?(d("Please fill in all fields"),u.error("Please fill in all fields"),!1):!0}const B=()=>{y();const[o,l]=t.useState(""),[r,i]=t.useState(""),[d,f]=t.useState(""),[m,h]=t.useState(""),[c,n]=t.useState(""),{loading:j,setSignup:s}=H(),x=(a,g)=>{const p=a.target.value;g==="username"?l(p):g==="email"?i(p):g==="password"?f(p):g==="conPassword"&&h(p)},N=async a=>{a.preventDefault(),await s(o,r,d,m,n)};return e.jsx("div",{className:"h-full flex justify-start",children:e.jsxs("div",{className:"flex flex-col justify-around",children:[e.jsxs("div",{children:[e.jsx(C,{label:"Hearty Welcome"}),e.jsx(I,{label:"Create your new account"}),e.jsxs("div",{className:"flex justify-center",children:[c&&e.jsx("span",{className:"text-red-500 absolute",children:c})," "]}),e.jsx(w,{head:"Username",holder:"Enter your username *",change:a=>x(a,"username")}),e.jsx(w,{head:"Email",holder:"Enter your email *",change:a=>x(a,"email")}),e.jsx(v,{head:"Password",holder:"Enter your new password *",change:a=>x(a,"password")}),e.jsx(v,{head:"Confirm Password",holder:"Confirm your password *",change:a=>x(a,"conPassword")}),e.jsx(S,{label:"Sign Up",load:j,click:N}),e.jsx(S,{label:"Continue with Google",icon:e.jsx(P,{}),load:j})]}),e.jsx("div",{children:e.jsx(E,{label:"Already have an account ?",linkText:"Sign In",to:"/signin"})})]})})},L=()=>e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx("div",{className:"w-[80vw] h-screen",children:e.jsx(A,{})}),e.jsx("div",{className:"w-full flex justify-center py-3",children:e.jsx("div",{className:"w-full flex justify-center rounded-2xl",children:e.jsx(B,{})})})]});export{L as default};
